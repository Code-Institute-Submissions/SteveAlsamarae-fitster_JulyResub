{% extends 'blog/_blog_base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %} Add Post | Fitster {% endblock title %}

{% block content %}
  <main class="pt-80">
    <div class="blog_area pt-50 pb-70">
      <h2 class="display-4 text-info text-center pb-0 m-0">Write a blog post</h2>
      <span
        class="text-center d-block pb-3"
        style="font-family:monospace"
      >
        Update your fellows about your fitness & success
      </span>
      <div class="container custome-container">
        <div class="row justify-content-center">
          <div class="col-lg-8" style="font-family:'Roboto', sans-serif;">
            <div class="text-center">
              <img
                src="https://socialistmodernism.com/wp-content/uploads/2017/07/placeholder-image.png?w=640"
                id="preview"
                height="240px"
                width="400px"
              >
            </div>
            <form method="post" enctype='multipart/form-data'>
              {% csrf_token %}
              {{form|crispy}}
              <div class="d-flex justify-content-center">
                <button class="btn btn-lg btn-dark">Add Post</button>
              </div>
            </form>
            {{ form.media }}
          </div>
        </div>
      </div>
    </div>
  </main>
  <script>
    document.querySelector('#id_thumbnail').addEventListener('change', function(e) {
      var file = e.target.files[0];
      var reader = new FileReader();
      reader.onload = function(e) {
        document.querySelector('#preview').src = e.target.result;
      }
      reader.readAsDataURL(file);
    });
    document.querySelector('.markdownx-preview').classList.add('pt-10');
  </script>
{% endblock content %}